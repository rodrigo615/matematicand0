<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo do Matematicando</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 5vw; background: #fdf6e3; max-width: 800px; margin: auto; }
  h1 { color: #2c3e50; font-size: 6vw; }
  .expression { font-size: 5vw; margin: 5vw 0; font-weight: bold; }
  input[type="number"] { font-size: 4.5vw; padding: 2vw; width: 60%; max-width: 250px; text-align: center; }
  .buttons { display: flex; justify-content: center; gap: 3vw; flex-wrap: wrap; margin-top: 3vw; }
  button { font-size: 4vw; padding: 2vw 5vw; cursor: pointer; border-radius: 1vw; border: none; background-color: #3498db; color: white; transition: background-color 0.3s; }
  button:hover { background-color: #2980b9; }
  .feedback { font-size: 4.5vw; margin: 3vw 0; font-weight: bold; }
  .score { font-size: 4vw; margin-top: 3vw; }
  @media (min-width: 1024px) {
      h1 { font-size: 40px; }
      .expression { font-size: 32px; }
      input[type="number"] { font-size: 22px; }
      button { font-size: 20px; padding: 12px 24px; border-radius: 6px; }
      .feedback { font-size: 24px; }
      .score { font-size: 22px; }
  }
</style>
</head>
<body>

<h1>Jogo do Matematicando</h1>
<div class="expression" id="expression">Clique em "Pr√≥xima" para come√ßar!</div>
<input type="number" id="answer" placeholder="Sua resposta">

<div class="buttons">
  <button onclick="checkAnswer()">Verificar</button>
  <button onclick="nextExpression()">Pr√≥xima</button>
</div>

<div class="feedback" id="feedback"></div>
<div class="score" id="score">Pontua√ß√£o: 0</div>

<script>
const API_URL = "https://matematicando.pythonanywhere.com";

let currentExpression = null;
let score = 0;
let alreadyAnswered = false;

async function nextExpression() {
    const feedbackEl = document.getElementById("feedback");

    if (currentExpression && !alreadyAnswered) {
        feedbackEl.innerText = "Voc√™ n√£o respondeu a quest√£o üò¢. Pontua√ß√£o zerada!";
        feedbackEl.style.color = "red";
        score = 0;
        document.getElementById("score").innerText = "Pontua√ß√£o: " + score;
    }

    const res = await fetch(`${API_URL}/get_expression`);
    const data = await res.json();
    currentExpression = data;

    document.getElementById("expression").innerText = data.expr;
    document.getElementById("answer").value = "";
    feedbackEl.innerText = "";
    feedbackEl.style.color = "black";
    alreadyAnswered = false;
}

async function checkAnswer() {
    if (alreadyAnswered || !currentExpression) return;

    const answer = Number(document.getElementById("answer").value);
    const res = await fetch(`${API_URL}/check_answer`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ id: currentExpression.id, answer })
    });
    const data = await res.json();

    const feedbackEl = document.getElementById("feedback");

    if (data.correct) {
        score++;
        feedbackEl.innerText = "Correto! üéâ";
        feedbackEl.style.color = "green";

        if (score === 50) {
            const finalRes = await fetch(`${API_URL}/finish`);
            const finalData = await finalRes.json();
            feedbackEl.innerText = finalData.message;
            score = 0;
        }
    } else {
        feedbackEl.innerText = "Errado üò¢. Resposta certa: " + data.correct_answer;
        feedbackEl.style.color = "red";
        score = 0;
    }

    document.getElementById("score").innerText = "Pontua√ß√£o: " + score;
    alreadyAnswered = true;
}
</script>

</body>
</html>














